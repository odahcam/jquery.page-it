(function(e,t,a,r){var s="pageIt",i={log:function(){console.log(s+": "+arguments[0],Array.prototype.slice.call(arguments,1))},info:function(){console.info(s+": "+arguments[0],Array.prototype.slice.call(arguments,1))},warn:function(){console.warn(s+": "+arguments[0],Array.prototype.slice.call(arguments,1))},error:function(){console.error(s+": "+arguments[0],Array.prototype.slice.call(arguments,1))}};if(!e)return i.error("Não foi possível reconhecer o jQuery, inicialização cancelada!"),!1;var n={size:null,first:1,prev:null,current:null,next:null,last:null,total:null},o={autoStart:!1,cache:!0,ajax:{url:"",cache:!1,global:!0,method:"get"},target:null,fillMode:"replace",meta:n};return t[s]=function(t){return this.settings=e.extend(!0,{},o,t),this.events={ready:[],"page.load.empty":[],"page.load.loaded":[],"page.load.autoupdated":[],"page.load.skipped":[],"page.load.first":[],"page.load.last":[],"page.load.error":[],"page.load.before":[],"page.load.after":[],"page.load.cache":[],"page.filled":[],"page.first":[],"page.prev":[],"page.next":[],"page.last":[]},this.pages=[],this.requesting=!1,this.meta=this.settings.meta,this.meta.current&&this.setCurrent(this.meta.current),this.requestData={},this.init()},Object.assign(t[s].prototype,{init:function(){this.trigger("ready"),this.settings.autoStart&&this.to(this.meta.current)},to:function(t){if(this.requesting===!0)return i.warn("Uma requisição de página já está em andamento, esta requisição será ignorada."),!1;var a=this.meta.last||this.meta.total;if(!t||a&&t>a)return this.trigger("page.load.skipped",{}),this.trigger("page.load.last",{}),!1;if("string"==typeof t&&"next"===t||"prev"===t)return this[t]();if(this.settings.cache&&this.pages[t])this.pages[t]?(this.fillContainer(this.pages[t]),this.trigger("page.load.loaded",this.pages[t]),this.trigger("page.load.cache",this.pages[t]),this.trigger("page.load.after",response)):this.trigger("page.load.empty",this.pages[t]);else{this.requestData={page:t},this.trigger("page.load.before",this.requestData);var r=this;this.requesting=!0,e.ajax({cache:this.settings.ajax.cache,global:this.settings.ajax.global,url:this.settings.ajax.url,method:this.settings.ajax.method,data:Object.assign({pageIt:!0},this.requestData),dataType:"html",success:function(e,a,s){var i={current:s.getResponseHeader("X-Page-Current"),size:s.getResponseHeader("X-Page-Size"),total:s.getResponseHeader("X-Page-Total"),first:s.getResponseHeader("X-Page-First"),prev:s.getResponseHeader("X-Page-Prev"),next:s.getResponseHeader("X-Page-Next"),last:s.getResponseHeader("X-Page-Last")};r.setMeta(i),r.pages[t]=e,r.setCurrent(t),e?(r.trigger("page.load.loaded",e),r.fillContainer(e)):r.trigger("page.load.empty",e)},error:function(e){i.error("Erro ao carregar página."),console.log(e),r.trigger("page.load.error",e)},complete:function(e){r.requesting=!1,r.trigger("page.load.after",e),console.groupEnd()}})}return this},fillContainer:function(t){if(this.settings.target){var a=e(this.settings.target),r=!0;switch(this.settings.fillMode){case"append":r=a.append(t);break;default:case"replace":r=a.html(t)}r?this.trigger("page.load.autoupdated",t):this.trigger("page.load.error",t)}else i.info("No replacement target set, no DOM manipulation will be made.")},first:function(){return this.trigger("page.first",this.meta.first),this.to(this.meta.first)},prev:function(){return this.trigger("page.prev",this.meta.next),this.to(this.meta.prev)},next:function(){return this.trigger("page.next",this.meta.next),this.to(this.meta.next)},last:function(){return this.trigger("page.last",this.meta.last),this.to(this.meta.last)},on:function(e,t){if(e.match(" "))e.split(" ").forEach(function(e){this.on(e,t)});else{if(!this.events[e])throw i.warn("Evento indisponível."),new Error("Can't attach unrecognized event handler.");this.events[e].push(t)}return this},off:function(e,t){if(e.match(" "))e.split(" ").forEach(function(e){this.off(e,t)});else{if(!this.events[e])throw i.warn("Evento indisponível."),new Error("Can't remove unrecognized event handler.");this.events[e]=[]}return this},trigger:function(e){if(this.events[e]&&this.events[e].length){var t=this,a=arguments;this.events[e].map(function(e){e.apply(t,Array.prototype.slice.call(a,1))})}return this},setMeta:function(e){Object.assign(this.meta,e)},setRequestData:function(e){Object.assign(this.requestData,e)},setCurrent:function(e){this.meta.current=e,this.meta.prev=e-1,this.meta.next=e+1}}),t[s]})(window.jQuery||!1,window,document);